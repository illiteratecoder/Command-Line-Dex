{"version":3,"sources":["command_line.js"],"names":["createTemplate","string","err","arguments","length","undefined","start","end","middle","element","newTemplate","document","createElement","innerHTML","content","firstChild","fixTypewriter","setupTypewriter","type","n","querySelector","addEventListener","cmdCtrl","cmd","re","regExp","exec","$model","src","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","_content","open","send","setAttribute","command","value","getElementById","blur","res","JSON","parse","responseText","id","type2","className","classList","remove","onload","add","setTimeout","name","type1","species"],"mappings":"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","file":"command_line.min.js","sourcesContent":["/* Handles input commands for the Dex */\n\n\"use strict\";\n\n// Creates an element for the typewriter effect\nfunction createTemplate( string, err=false ) {\n\n\tlet start = '<pre data-target=\"copy\" data-opt=\"append\">',\n\t\tend   = '\\n</pre>',\n\t\tmiddle;\n\n\tif ( err === 404 ) {\n\t\tmiddle = '<span class=\"err-highlight\">404: \\'' + string + '\\' was not found </span>';\n\t}\n\telse if ( err ) {\n\t\tmiddle = '<span class=\"err-highlight\">Uncaught TypeError: newPokemon.' + string + '() is not a function</span>';\n\t}\n\telse {\n        middle = 'newPokemon.<span class=\"var-highlight\">' + string + '</span>();';\n\t}\n\n\tlet element     = start + middle + end,\n\t\tnewTemplate = document.createElement( \"template\" );\n\t\t\n\tnewTemplate.innerHTML = element;\n\n\treturn newTemplate.content.firstChild\n}\n\n\n// Sets up the typewriter and starts the type animation\nfunction fixTypewriter( content ){\n\n\tlet typewriter = setupTypewriter( content );\n\ttypewriter.type();\n\n\treturn false\n}\n\nlet n = null;  // number of the current Pokemon displayed\n\n// Run when command line input value changes (hits return or clicks off)\ndocument.querySelector( '[name=\"command\"]' ).addEventListener( 'change', function() {\n\t\n\tthis.setAttribute( \"disabled\", true ); \t\t\t // disable input until type animation is finished\n\tlet command = this.value,  \t\t\t\t\t\t // the input\n\t\t$model  = document.getElementById( 'model' );  // the animated model element\n\n\t// Outputs appropriate img src for command based on what image is currently displayed\n\tfunction cmdCtrl( cmd ) {\n\n\t\t// Regex to get suffixs of mega, alola, and shiny\n\t\t// >> http://site.com/models/9-mega-shiny.gif\n\t\t// >> [models/3-mega-shiny.gif, mega, shiny]\n\t\tlet re     = /(?:models\\/)(?:\\d{1,3})(?:\\-{1}(mega|alola|attack|hat))?(?:\\-{1}(shiny))?(?:\\.gif)/,\n\t\t\tregExp = re.exec($model.src),\n\t\t\tsrc    = \"models/\" + n;\n\n\t\tif ( cmd === 'mega' || cmd === 'alola' || cmd === 'attack' || cmd === 'hat' ) {\n\t\t\tif ( regExp[1] === undefined || regExp[1] !== cmd ) {\n\t\t\t\tsrc += \"-\" + cmd;\n\n\t\t\t\tif ( cmd === 'mega' || cmd === 'alola' ) {\n\t\t\t\t\tif ( regExp[2] !== undefined ) {\n\t\t\t\t\t\tsrc += \"-\" + regExp[2];  // if pokemon is already shiny, keep it shiny\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( regExp[1] === cmd ) {\n\t\t\t\tif ( regExp[2] !== undefined ){\n\t\t\t\t\tsrc += \"-\" + regExp[2];  // if pokemon is already shiny, keep it shiny\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if ( cmd === 'shiny' ) {\n\t\t\tif ( regExp[1] === undefined ) {\n\t\t\t\tif ( regExp[2] === undefined ){\n\t\t\t\t\tsrc += \"-\" + cmd;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( regExp[1] === 'attack' || regExp[1] === 'hat' ) {\n\t\t\t\tsrc += \"-\" + cmd;\n\t\t\t}\n\t\t\telse if ( regExp[1] === 'mega' || regExp[1] === 'alola' ) {\n\t\t\t\tsrc += \"-\" + regExp[1];  // if pokemon is already mega or alolan, keep it that way\n\n\t\t\t\tif ( regExp[2] === undefined ) {\n\t\t\t\t\tsrc += \"-\" + cmd;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsrc += \".gif\";\n\n\t\tif ( cmd !== 'relax' ) {\n\t\t\tlet xhttp = new XMLHttpRequest();\n\n\t\t\t// Check if image file exists\n\t\t\txhttp.onreadystatechange = function() {\n\t\t\t\tif ( this.readyState === 4 && this.status === 200 ) {\n\t\t\t\t\t$model.src = src;\n\n\t\t\t\t\tlet content = createTemplate( cmd );\n\t\t\t\t\tfixTypewriter( content );\t\t\n\t\t\t\t}\n\t\t\t\telse if ( this.readyState === 4 && this.status !== 200 ) {\n\t\t\t\t\tlet content = createTemplate( cmd, true );\n\t\t\t\t\tfixTypewriter( content );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhttp.open( 'GET', src, true );\n\t\t\txhttp.send();\n\t\t}\n\t\telse {\n\t\t\t$model.src = src;\n\n\t\t\tlet content = createTemplate( cmd );\n\t\t\tfixTypewriter( content );\t\n\t\t}\n\t\treturn false\n\t}\n\n\t// Prevent function from running again after value is reset\n\tif ( this.value === '' ) {\n\t\treturn false\n\t}\n\n\t// Reset command line\n\tthis.value = '';\n\tthis.blur();\n\n\t// Attack command\n\t\tif ( command === 'attack' ) {\n\t\t\tcmdCtrl( 'attack' );\n\t\t}\n\n\t// Shiny command\n\t\telse if ( command === 'shiny' ) {\n\t\t\tcmdCtrl( 'shiny' );\n\t\t}\n\n\t// Mega command\n\t\telse if ( command === 'mega' ) {\n\t\t\tcmdCtrl( 'mega' );\n\t\t}\n\n\t// Alola command\n\t\telse if ( command === 'alola' ) {\n\t\t\tcmdCtrl( 'alola' );\n\t\t}\n\n\t// Hat command (for pikachu)\n\t\telse if (command === 'hat') {\n\t\t\tcmdCtrl( 'hat' );\n\t\t}\n\n\t// Relax command\n\t\telse if ( command === 'relax' ) {\n\t\t\tcmdCtrl( 'relax' );\n\t\t}\n\n\t// Pokemon command\n\t\telse {\n\t\t\tlet xhttp = new XMLHttpRequest();\n\n\t\t\txhttp.onreadystatechange = function() {\n\t\t\t\tif ( this.readyState === 4 && this.status === 200 ) {\n\t\t\t\t\tlet res = JSON.parse(this.responseText);\n\n\t\t\t\t\tif ( res === null ) {\n\t\t\t\t\t\tlet content = createTemplate(command, 404);\n\t\t\t\t\t\tfixTypewriter(content);\n\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\n\t\t\t\t\t$model.src = \"images/ball-shake.gif\";  // image before pokemon is displayed\n\t\t\t\t\tn = res.id;\n\n\t\t\t\t\tif ( !res.type2 ) {\n\t\t\t\t\t\tres.type2 = \"null\";\n\t\t\t\t\t\tdocument.getElementById('poketype2').className = \"int-highlight\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tres.type2 = \"'\" + res.type2 + \"'\";\n\t\t\t\t\t\tdocument.getElementById('poketype2').className = \"string-highlight\";\n\t\t\t\t\t}\n\n\t\t\t\t\t$model.classList.remove(\"grow\");\n\t\t\t\t\t$model.onload = function() { $model.classList.add(\"grow\"); }\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t$model.src = \"models/\" + res.id + \".gif\";\n\t\t\t\t\t\t// $model.classList.add(\"grow\");\n\t\t\t\t\t}, 1600);\n\n\t\t\t\t\tdocument.getElementById( 'name'        ).innerHTML = res.name;\n\t\t\t\t\tdocument.getElementById( 'number'      ).innerHTML = '#' + res.id;\n\t\t\t\t\tdocument.getElementById( 'pokename'    ).innerHTML = \"'\" + res.name + \"'\";\n\t\t\t\t\tdocument.getElementById( 'pokenum'     ).innerHTML = res.id;\n\t\t\t\t\tdocument.getElementById( 'poketype1'   ).innerHTML = \"'\" + res.type1 + \"'\";\n\t\t\t\t\tdocument.getElementById( 'poketype2'   ).innerHTML = res.type2;\n\t\t\t\t\tdocument.getElementById( 'pokespecies' ).innerHTML = \"'\" + res.species + \"'\";\n\n\t\t\t\t\tlet typewriter = document.getElementById('typewriter');\n\t\t\t\t    fixTypewriter(typewriter);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhttp.open( 'GET', 'pokefinder.php?name=' + command, true );\n\t\t\txhttp.send();\n\t\t}\n\n\treturn false\n});\n\n\n\n"]}